public class FunctionDeclarationAST {
  String returntypename;
  String funcname;
  ParameterAST[] parameters;
  FUNCTION funcObj;

  public void CheckFunctionNameAndReturnType() {
    IDENTIFIER T = ST.lookUpAll(returntypename);
    IDENTIFIER F = ST.lookUp(funcname);
    if (T == Null) {
      System.err.println("Unknown type "+returntypename);
    } else if (!T instanceof TYPE) {
      System.err.println(returntypename+" is not a type");
    } else if (!T.isReturnable()) {
      System.err.println("cannot return "+returntypename+" objects")
    } else if (F != Null) {
      System.err.println(funcname+" is already declared")
    } else {
      funcObj= new FUNCTION(T);
      ST.add(funcname, funcObj);
    }
  }

  public void Check() {
    CheckFunctionNameAndReturnType();
    ST = new SymbolTable(ST);
    funcObj.symtab = ST;

    for (ParameterAST p : parameters) {
      P.check();
      funcObj.formals.append(p.paramObj);
    }

    ST = ST.encSymTable;
  }
}
